{{ 'component-slider.css' | asset_url | stylesheet_tag }}
{{ 'component-card.css' | asset_url | stylesheet_tag }}
{{ 'component-price.css' | asset_url | stylesheet_tag }}

{%- comment -%}
  🎯 EXACT boAt Lifestyle Light Product Carousel Clone
  Simplified version matching boat-lifestyle.com product carousel
{%- endcomment -%}

<div
  id="shopify-section-{{ section.id }}"
  class="shopify-section shopify-section--featured-collections two-pt-o light-version"
>
  <section class="section section--flush">
    <div class="section__color-wrapper">
      <div class="featured_collection_container-{{ section.id }} featured_collection_container container">
        <header class="section__header">
          <div class="">
            <a
              class="d-flex justify-content-between align-items-center"
              href="{{ section.settings.collection.url | default: '/collections/all' }}"
            >
              <h3 class="ui2-heading">
                {{ section.settings.title | default: 'Featured' }}&nbsp;<span
                  ><b>{{ section.settings.title_bold | default: 'Products' }}</b></span
                >
              </h3>
              <b class="view-all">
                {{- section.settings.view_all_text | default: 'View All' }}
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14">
                  <path d="M8.159,2.693a6.7,6.7,0,0,0,2.7-.551A7.172,7.172,0,0,0,13.095.625,7.133,7.133,0,0,0,14.608-1.6a6.735,6.735,0,0,0,.548-2.706,6.7,6.7,0,0,0-.551-2.7A7.216,7.216,0,0,0,13.087-9.25a7.041,7.041,0,0,0-2.234-1.513,6.781,6.781,0,0,0-2.7-.544,6.755,6.755,0,0,0-2.7.544A7.1,7.1,0,0,0,3.22-9.25,7.134,7.134,0,0,0,1.7-7.012a6.742,6.742,0,0,0-.548,2.7A6.7,6.7,0,0,0,1.706-1.6,7.184,7.184,0,0,0,3.223.625a7.184,7.184,0,0,0,2.23,1.517A6.7,6.7,0,0,0,8.159,2.693Zm0-1.283A5.609,5.609,0,0,1,5.932.968,5.741,5.741,0,0,1,4.109-.261,5.692,5.692,0,0,1,2.885-2.084a5.648,5.648,0,0,1-.44-2.226,5.648,5.648,0,0,1,.44-2.226A5.692,5.692,0,0,1,4.109-8.36,5.7,5.7,0,0,1,5.929-9.585a5.622,5.622,0,0,1,2.223-.44,5.675,5.675,0,0,1,2.23.44A5.681,5.681,0,0,1,12.208-8.36a5.692,5.692,0,0,1,1.225,1.823,5.648,5.648,0,0,1,.44,2.226,5.648,5.648,0,0,1-.44,2.226A5.692,5.692,0,0,1,12.208-.261,5.741,5.741,0,0,1,10.385.968,5.609,5.609,0,0,1,8.159,1.411Zm3.5-5.735a.637.637,0,0,0-.209-.44l-2.306-2.3a.541.541,0,0,0-.389-.144.5.5,0,0,0-.371.151.507.507,0,0,0-.148.367.526.526,0,0,0,.166.4l.843.821.793.648L8.62-4.887H5.183a.528.528,0,0,0-.4.162.557.557,0,0,0-.155.4.553.553,0,0,0,.155.4.535.535,0,0,0,.4.159H8.62l1.419-.058-.793.656L8.4-2.35a.5.5,0,0,0-.166.389.528.528,0,0,0,.148.378.491.491,0,0,0,.371.155.529.529,0,0,0,.389-.159l2.306-2.291A.627.627,0,0,0,11.661-4.325Z" transform="translate(-1.155 11.307)" fill="#2f5b96"></path>
                </svg>
              </b>
            </a>
          </div>
        </header>

        <div class="featured-collections">
          <product-list id="block-{{ section.id }}" class="product-list product-list--center">
            <div class="small-grids">
              <div class="product-list__inner">
                {%- assign collection = section.settings.collection -%}
                {%- assign product_limit = section.settings.products_to_show | default: 6 -%}

                {%- if collection != blank -%}
                  {%- for product in collection.products limit: product_limit -%}
                    <product-item class="product-item two-point-o product-item-vertical">
                      <div class="product__wrapper">
                        <div class="labels-wrapper metafeild-label">
                          {%- comment -%} Feature Label {%- endcomment -%}
                          {%- if product.metafields.custom.feature_label != blank -%}
                            <span class="metafeild-label label--highlight custom-label label ui-2">
                              {{- product.metafields.custom.feature_label -}}
                            </span>
                          {%- endif -%}

                          {%- comment -%} Rating System {%- endcomment -%}
                          {%- if section.settings.show_ratings -%}
                            <div class="card--rating">
                              <div class="rating">
                                <div
                                  class="rating__stars"
                                  data-rating="{{ product.metafields.reviews.rating.value | default: 4.5 }}"
                                  role="img"
                                  aria-label="{{ product.metafields.reviews.rating.value | default: 4.5 }} out of 5.0 stars"
                                >
                                  <span>
                                    <img
                                      src="https://cdn.shopify.com/s/files/1/0057/8938/4802/files/star-5.png?v=1722331088"
                                      alt="star"
                                      width="100"
                                      height="100"
                                      loading="lazy"
                                      style="width: 14px;display: inline-block;vertical-align: bottom;"
                                    >
                                  </span>
                                  {{ product.metafields.reviews.rating.value | default: 4.5 }}
                                </div>
                                <span class="rating__caption plp-reviews" style="font-size:12px!important;">
                                  {{- product.metafields.reviews.rating_count.value | default: 83 -}}
                                  <span
                                    ><img
                                      src="https://cdn.shopify.com/s/files/1/0057/8938/4802/files/Mask_group-10.png?v=1677571152"
                                      style="width:11px;height:11px;"
                                      alt="verified reviews"></span
                                ></span>
                              </div>
                            </div>
                          {%- endif -%}

                          {%- comment -%} Priority Labels {%- endcomment -%}
                          {%- if product.tags contains 'new-launch' -%}
                            <span
                              class="priority label z-4 label--highlight custom-label bg-purple just launched"
                              style="display: flex; align-items: center;"
                            >
                              🎉 New Launch
                            </span>
                          {%- elsif product.tags contains 'trending' -%}
                            <span
                              class="priority label z-6 label--highlight custom-label bg-orange trending"
                              style="display: flex; align-items: center;"
                            >
                              ✨Trending
                            </span>
                          {%- endif -%}

                          {%- comment -%} Product Image {%- endcomment -%}
                          <div class="product-item__image-wrapper">
                            <a
                              href="{{ product.url }}"
                              class="product-item__aspect-ratio aspect-ratio"
                              style="padding-bottom: 100.0%; --aspect-ratio: 1"
                            >
                              {%- if product.featured_media -%}
                                <img
                                  class="product-item__primary-image"
                                  loading="lazy"
                                  width="300"
                                  height="300"
                                  decoding="async"
                                  alt="{{ product.featured_media.alt | escape }}"
                                  src="{{ product.featured_media | image_url: width: 600 }}"
                                  srcset="
                                    {{ product.featured_media | image_url: width: 200 }} 200w,
                                    {{ product.featured_media | image_url: width: 400 }} 400w,
                                    {{ product.featured_media | image_url: width: 600 }} 600w
                                  "
                                  sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 300px"
                                >
                              {%- endif -%}
                            </a>
                          </div>
                        </div>

                        {%- comment -%} Product Info {%- endcomment -%}
                        <div class="product-item__info">
                          <div class="product-item-meta">
                            <span class="product-item-meta__reviews-badge text--small vertical-product__card">
                              <a href="{{ product.url }}" class="product-item-meta__title tile-title">
                                {{ product.title | escape }}
                              </a>

                              <div class="product__spliter"></div>

                              <div class="product-item-meta__price-list-container">
                                <div class="price-list price-list--centered">
                                  <span
                                    class="price price--highlight product-card-price"
                                    data-price="{{ product.price }}"
                                  >
                                    <span class="visually-hidden">Sale price</span>{{ product.price | money }}
                                  </span>

                                  {%- if product.compare_at_price > product.price -%}
                                    <div class="grid--price">
                                      <span
                                        class="price price--compare line-through"
                                        data-compare-price="{{ product.compare_at_price }}"
                                      >
                                        <span class="visually-hidden">Regular price</span>
                                        {{- product.compare_at_price | money }}
                                      </span>
                                      {%- assign discount = product.compare_at_price
                                        | minus: product.price
                                        | times: 100.0
                                        | divided_by: product.compare_at_price
                                        | round
                                      -%}
                                      <p class="m-0 off">{{ discount }}% off</p>
                                    </div>
                                  {%- endif -%}
                                </div>
                              </div>

                              {%- comment -%} Color Swatches (Simplified) {%- endcomment -%}
                              {%- if section.settings.show_color_swatches and product.options contains 'Color' -%}
                                {%- assign color_option_index = 0 -%}
                                {%- for option in product.options -%}
                                  {%- if option == 'Color' -%}
                                    {%- assign color_option_index = forloop.index0 -%}
                                    {%- break -%}
                                  {%- endif -%}
                                {%- endfor -%}

                                <button
                                  aria-label="Color Options"
                                  class="variants-list"
                                  style="background: none; border: none; padding: 0; cursor: pointer;"
                                >
                                  {%- assign displayed_colors = 0 -%}
                                  {%- for value in product.options[color_option_index].values limit: 2 -%}
                                    {%- assign color_handle = value | handle -%}
                                    {%- assign swatch_color = '#000000' -%}
                                    {%- case color_handle -%}
                                      {%- when 'black' -%}
                                        {%- assign swatch_color = '#000000' -%}
                                      {%- when 'white' -%}
                                        {%- assign swatch_color = '#ffffff' -%}
                                      {%- when 'gray', 'grey' -%}
                                        {%- assign swatch_color = '#a6a5a6' -%}
                                      {%- when 'blue' -%}
                                        {%- assign swatch_color = '#0a3fa8' -%}
                                      {%- when 'green' -%}
                                        {%- assign swatch_color = '#567f3d' -%}
                                      {%- when 'cyan' -%}
                                        {%- assign swatch_color = '#2b9bad' -%}
                                      {%- else -%}
                                        {%- assign swatch_color = '#a6a5a6' -%}
                                    {%- endcase -%}
                                    <span class="swatch-circle" style="background:{{ swatch_color }}"></span>
                                    {%- assign displayed_colors = displayed_colors | plus: 1 -%}
                                  {%- endfor -%}

                                  {%- assign remaining_colors = product.options[color_option_index].values.size
                                    | minus: displayed_colors
                                  -%}
                                  {%- if remaining_colors > 0 -%}
                                    <span class="more-colors">+{{ remaining_colors }}</span>
                                  {%- endif -%}
                                </button>
                              {%- endif -%}
                            </span>
                            <div class="position-relative"></div>
                          </div>
                        </div>
                      </div>
                    </product-item>
                  {%- endfor -%}
                {%- else -%}
                  <div class="boat-carousel-placeholder">
                    <p>Please select a collection in the theme settings to display products.</p>
                  </div>
                {%- endif -%}
              </div>
            </div>
          </product-list>
        </div>
      </div>
    </div>
  </section>
</div>

{%- comment -%} boAt Light Carousel Styling {%- endcomment -%}
<style data-shopify="">
  #shopify-section-{{ section.id }} {
    --section-products-per-row: {{ section.settings.products_per_row_mobile | default: 2 }};
  }

  @media screen and (min-width: 741px) {
    #shopify-section-{{ section.id }} {
      --section-products-per-row: {{ section.settings.products_per_row_tablet | default: 3 }};
    }
  }

  @media screen and (min-width: 1000px) {
    #shopify-section-{{ section.id }} {
      --section-products-per-row: {{ section.settings.products_per_row_desktop | default: 3 }};
    }
  }

  @media screen and (min-width: 1200px) {
    #shopify-section-{{ section.id }} {
      --section-products-per-row: {{ section.settings.products_per_row_desktop | default: 3 }};
      overflow-y: hidden;
    }
  }

  /* Light Version Specific Styling */
  .light-version {
    background: {{ section.settings.section_background | default: '#f8f9fa' }};
    padding: {{ section.settings.section_padding_top | default: 30 }}px 0 {{ section.settings.section_padding_bottom | default: 30 }}px;
  }

  .light-version .ui2-heading {
    font-size: {{ section.settings.heading_size | default: 24 }}px;
    font-weight: {{ section.settings.heading_weight | default: 600 }};
    color: {{ section.settings.heading_color | default: '#1a1a1a' }};
    margin: 0;
  }

  .light-version .view-all {
    color: {{ section.settings.view_all_color | default: '#2f5b96' }};
    font-size: {{ section.settings.view_all_size | default: 14 }}px;
    font-weight: {{ section.settings.view_all_weight | default: 600 }};
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 5px;
  }

  /* Light Version Grid */
  .light-version .product-list__inner {
    display: grid;
    grid-template-columns: repeat(var(--section-products-per-row), 1fr);
    gap: {{ section.settings.grid_gap | default: 16 }}px;
  }

  /* Simplified Card Design */
  .light-version .product-item.two-point-o.product-item-vertical {
    background: {{ section.settings.card_background | default: '#ffffff' }};
    border-radius: {{ section.settings.card_border_radius | default: 6 }}px;
    overflow: hidden;
    box-shadow: {{ section.settings.card_shadow | default: '0 1px 4px rgba(0,0,0,0.08)' }};
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .light-version .product-item.two-point-o.product-item-vertical:hover {
    transform: translateY(-2px);
    box-shadow: {{ section.settings.card_hover_shadow | default: '0 4px 12px rgba(0,0,0,0.12)' }};
  }

  /* Simplified Labels */
  .light-version .metafeild-label.label--highlight.custom-label.label.ui-2 {
    position: absolute;
    top: 6px;
    left: 6px;
    background: {{ section.settings.feature_label_bg | default: '#007aff' }};
    color: {{ section.settings.feature_label_color | default: '#ffffff' }};
    padding: 3px 6px;
    border-radius: 3px;
    font-size: 9px;
    font-weight: 600;
    z-index: 3;
  }

  .light-version .priority.label {
    position: absolute;
    top: 6px;
    right: 6px;
    padding: 3px 6px;
    border-radius: 3px;
    font-size: 9px;
    font-weight: 600;
    z-index: 2;
  }

  .light-version .bg-purple {
    background: {{ section.settings.purple_label_bg | default: '#8b5cf6' }};
    color: {{ section.settings.purple_label_color | default: '#ffffff' }};
  }

  .light-version .bg-orange {
    background: {{ section.settings.orange_label_bg | default: '#f97316' }};
    color: {{ section.settings.orange_label_color | default: '#ffffff' }};
  }

  /* Simplified Rating */
  .light-version .card--rating {
    position: absolute;
    bottom: 6px;
    left: 6px;
    background: rgba(255, 255, 255, 0.9);
    padding: 3px 5px;
    border-radius: 3px;
    z-index: 2;
  }

  .light-version .rating__stars {
    display: flex;
    align-items: center;
    gap: 3px;
    font-size: 11px;
    font-weight: 600;
  }

  /* Simplified Product Info */
  .light-version .product-item__info {
    padding: 12px;
  }

  .light-version .product-item-meta__title {
    font-size: {{ section.settings.product_title_size | default: 14 }}px;
    font-weight: {{ section.settings.product_title_weight | default: 600 }};
    color: {{ section.settings.product_title_color | default: '#1a1a1a' }};
    text-decoration: none;
    display: block;
    margin-bottom: 6px;
  }

  .light-version .product__spliter {
    height: 1px;
    background: {{ section.settings.splitter_color | default: '#e5e5e5' }};
    margin: 6px 0;
  }

  /* Simplified Pricing */
  .light-version .price-list {
    display: flex;
    align-items: baseline;
    gap: 6px;
    margin-bottom: 8px;
  }

  .light-version .price--highlight {
    font-size: {{ section.settings.price_size | default: 16 }}px;
    font-weight: {{ section.settings.price_weight | default: 700 }};
    color: {{ section.settings.price_color | default: '#1a1a1a' }};
  }

  .light-version .grid--price {
    display: flex;
    flex-direction: column;
    gap: 1px;
  }

  .light-version .price--compare {
    font-size: {{ section.settings.compare_price_size | default: 12 }}px;
    color: {{ section.settings.compare_price_color | default: '#888' }};
    text-decoration: line-through;
  }

  .light-version .off {
    font-size: {{ section.settings.discount_size | default: 11 }}px;
    color: {{ section.settings.discount_color | default: '#e53e3e' }};
    font-weight: 600;
  }

  /* Simplified Swatches */
  .light-version .variants-list {
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .light-version .swatch-circle {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    border: 1px solid #fff;
    box-shadow: 0 0 0 1px #ddd;
  }

  .light-version .more-colors {
    font-size: 11px;
    color: {{ section.settings.more_colors_color | default: '#666' }};
    font-weight: 500;
  }

  /* Common Utility Classes */
  .d-flex { display: flex; }
  .justify-content-between { justify-content: space-between; }
  .align-items-center { align-items: center; }
  .m-0 { margin: 0; }
  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
  .position-relative { position: relative; }

  /* Placeholder */
  .boat-carousel-placeholder {
    text-align: center;
    padding: 30px 15px;
    color: #666;
    font-size: 14px;
  }
</style>

{% schema %}
{
  "name": "🚤 boAt Light Carousel (EXACT)",
  "settings": [
    {
      "type": "header",
      "content": "🎯 boAt Light Design Settings"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Featured"
    },
    {
      "type": "text",
      "id": "title_bold",
      "label": "Bold Title Part",
      "default": "Products"
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "View All Text",
      "default": "View All"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 2,
      "max": 12,
      "step": 1,
      "label": "Products to show",
      "default": 6
    },
    {
      "type": "header",
      "content": "🎨 Color Scheme"
    },
    {
      "type": "color",
      "id": "section_background",
      "label": "Section Background",
      "default": "#f8f9fa"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#1a1a1a"
    },
    {
      "type": "color",
      "id": "view_all_color",
      "label": "View All Color",
      "default": "#2f5b96"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Card Background",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "📐 Layout & Spacing"
    },
    {
      "type": "range",
      "id": "section_padding_top",
      "min": 0,
      "max": 80,
      "step": 2,
      "label": "Section padding top",
      "default": 30
    },
    {
      "type": "range",
      "id": "section_padding_bottom",
      "min": 0,
      "max": 80,
      "step": 2,
      "label": "Section padding bottom",
      "default": 30
    },
    {
      "type": "range",
      "id": "grid_gap",
      "min": 8,
      "max": 30,
      "step": 2,
      "label": "Grid gap",
      "default": 16
    },
    {
      "type": "range",
      "id": "products_per_row_mobile",
      "min": 1,
      "max": 3,
      "step": 1,
      "label": "Products per row (Mobile)",
      "default": 2
    },
    {
      "type": "range",
      "id": "products_per_row_tablet",
      "min": 2,
      "max": 4,
      "step": 1,
      "label": "Products per row (Tablet)",
      "default": 3
    },
    {
      "type": "range",
      "id": "products_per_row_desktop",
      "min": 2,
      "max": 4,
      "step": 1,
      "label": "Products per row (Desktop)",
      "default": 3
    },
    {
      "type": "header",
      "content": "🎪 Card Design"
    },
    {
      "type": "range",
      "id": "card_border_radius",
      "min": 0,
      "max": 15,
      "step": 1,
      "label": "Card border radius",
      "default": 6
    },
    {
      "type": "text",
      "id": "card_shadow",
      "label": "Card shadow",
      "default": "0 1px 4px rgba(0,0,0,0.08)"
    },
    {
      "type": "text",
      "id": "card_hover_shadow",
      "label": "Card hover shadow",
      "default": "0 4px 12px rgba(0,0,0,0.12)"
    },
    {
      "type": "header",
      "content": "🏷️ Labels"
    },
    {
      "type": "color",
      "id": "feature_label_bg",
      "label": "Feature Label Background",
      "default": "#007aff"
    },
    {
      "type": "color",
      "id": "purple_label_bg",
      "label": "Purple Label Background",
      "default": "#8b5cf6"
    },
    {
      "type": "color",
      "id": "orange_label_bg",
      "label": "Orange Label Background",
      "default": "#f97316"
    },
    {
      "type": "header",
      "content": "⭐ Ratings"
    },
    {
      "type": "checkbox",
      "id": "show_ratings",
      "label": "Show ratings",
      "default": true
    },
    {
      "type": "header",
      "content": "🎨 Color Swatches"
    },
    {
      "type": "checkbox",
      "id": "show_color_swatches",
      "label": "Show color swatches",
      "default": true
    },
    {
      "type": "header",
      "content": "📝 Typography"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 18,
      "max": 32,
      "step": 1,
      "label": "Heading font size",
      "default": 24
    },
    {
      "type": "range",
      "id": "product_title_size",
      "min": 12,
      "max": 18,
      "step": 1,
      "label": "Product title font size",
      "default": 14
    },
    {
      "type": "range",
      "id": "price_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "label": "Price font size",
      "default": 16
    }
  ],
  "presets": [
    {
      "name": "🚤 boAt Light Carousel (EXACT)"
    }
  ]
}
{% endschema %}
